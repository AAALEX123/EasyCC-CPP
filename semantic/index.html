<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Semantic analysis - EasyCC C++</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Semantic analysis";
    var mkdocs_page_input_path = "semantic.md";
    var mkdocs_page_url = "/semantic/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> EasyCC C++</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../lexical/">Lexical analysis</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../syntax/">Syntax analysis</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Semantic analysis</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#semantic-analysis">Semantic analysis</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#description">Description</a></li>
        
            <li><a class="toctree-l3" href="#what-is-an-action-token">What is an action token?</a></li>
        
            <li><a class="toctree-l3" href="#what-is-an-action-handler">What is an action handler?</a></li>
        
            <li><a class="toctree-l3" href="#i-add-action-tokens-to-the-grammar">I - Add action tokens to the grammar</a></li>
        
            <li><a class="toctree-l3" href="#ii-create-action-handlers">II - Create action handlers</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../code/">Code generation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../example/">Calculator example</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">EasyCC C++</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Semantic analysis</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/amirbawab/EasyCC-CPP/edit/master/docs/semantic.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="semantic-analysis">Semantic analysis</h1>
<h2 id="description">Description</h2>
<p>Semantic anlysis is applied while the syntax analyzer matches the user code with its corresponding grammar
productions. The semantic analysis phase introduces action tokens, responsible for performing actions at 
specific locations in the language grammar.</p>
<h2 id="what-is-an-action-token">What is an action token?</h2>
<p>An action token is a special token that can be injected at several locations in the language grammar. 
The added tokens do not affect the syntax of the language, but they inform the syntax analyzer that at this 
location in the grammar a particular action need to be performed. In its turn, the syntax anlyzer
passes the action to the semantic analyzer which can map each action to its corresponding handler function.</p>
<h2 id="what-is-an-action-handler">What is an action handler?</h2>
<p>An action handler is a function that is executed by the semantic analyzer when the syntax analyzer encounters
an action token. When an action hander is called, it will be provided with the last lexical token parsed
by the syntax analyzer, and the phase number which is usally helpful when an input file needs to be scanned
more than one time.</p>
<h2 id="i-add-action-tokens-to-the-grammar">I - Add action tokens to the grammar</h2>
<p>An action token is represented by a string surrounded by a <code>#</code> symbol on both sides. Each action token in
the grammar reports information about the most recent lexical token that was consumed by the syntax analyzer.</p>
<p>For example, consider the following grammar:</p>
<pre><code class="json">{
    &quot;...&quot;,
    &quot;CLASS_DEFINITION&quot;  : &quot;CLASS #newClass# CLASS_NAME #setClassName# CLASS_BODY #endClass#&quot;,
    &quot;CLASS&quot;             : &quot;'class'&quot;,
    &quot;CLASS_NAME&quot;        : &quot;'identifier'&quot;,
    &quot;CLASS_BODY&quot;        : &quot;OPEN_CURLY STATEMENT CLOSE_CURLY&quot;,
    &quot;...&quot;
}
</code></pre>

<p>The above grammar demonstrates how action tokens help in constructing a class:</p>
<ul>
<li><code>#newClass#</code> action handler can construct a new instance of a class.</li>
<li><code>#setClassName#</code> action handler can set the name of the created class. <ul>
<li>Notice that the action token is placed right after the lexical token <code>'identifier'</code> because it
provides the handler function with the necessary arguments to identify the exact lexical token.</li>
</ul>
</li>
<li><code>#endClass#</code> action handler can delete the created class.</li>
</ul>
<h2 id="ii-create-action-handlers">II - Create action handlers</h2>
<p>An action handler can be registered using the function<code>IEasyCC::registerSemanticAction()</code>. Here is a simple
code showing how the action tokens in the previous example can be registered.</p>
<pre><code class="c++">typedef std::vector&lt;std::shared_ptr&lt;ecc::LexicalToken&gt;&gt; Tokens;

easyCC-&gt;registerSemanticAction(&quot;#newClass#&quot;,[&amp;](int phase, Tokens &amp;lexicalVector, int index){
    newClass = new MyClass();
});

easyCC-&gt;registerSemanticAction(&quot;#setClassName#&quot;,[&amp;](int phase, Tokens &amp;lexicalVector, int index){
    newClass-&gt;setName(lexicalVector[index]); // Get the last lexical token parsed
                                             // by the syntax analyzer
});

easyCC-&gt;registerSemanticAction(&quot;#endClass#&quot;,[&amp;](int phase, Tokens &amp;lexicalVector, int index){
    delete newClass;
});
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../code/" class="btn btn-neutral float-right" title="Code generation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../syntax/" class="btn btn-neutral" title="Syntax analysis"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/amirbawab/EasyCC-CPP" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../syntax/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../code/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
